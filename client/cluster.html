<!DOCTYPE html>
<html>
<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="http://meyerweb.com/eric/tools/css/reset/reset.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="style.css">
</head>

<body>
<div class="pure-g">
    <div id="grapharea" class="pure-u-3-4">
        <div id="graph"></div>
    </div>
    <div class="pure-u-1-4">
        <div class="sidebar">
            <h1 id="pageTitle">Most Popular Words</h1>

            <div id="nodeDetails">

            </div>

            <hr>
            <a href="index.html" class="round-button">About</a><br><br>
            <p>We had to choose different data to show which has set us back. Features still to come...</p>
            <ul>
                <li>Node changes color when selected, neighbor nodes change color</li>
                <li>Option to view details for single node only</li>
                <li>View users of a node and the groups they're in</li>
                <li>Filter based on minimum number of shared users, group privacy, number of users in group</li>
            </ul>
        </div>
    </div>

</div>
    <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <script>
            var w = document.getElementById('grapharea').offsetWidth - 30;
            var h = 869;

            var force = d3.layout.force()
                            .charge(-275)
                            //.chargeDistance(100)
                            .linkDistance(30)
                            //.friction(0)
                            //.theta(1)
                            .gravity(.1)
                            .size([w, h]);
            var svg = d3.select("#graph")
                            .append("svg")
                            .attr("width", w)
                            .attr("height", h)
                            .style("background", "aqua");
            
            d3.json("http://travisolbrich.com:8080/words/frequency", function(error, graph){
                if(error) throw error;
                
                force.nodes(graph.nodes)
                     .start();
                
                var bar = svg.selectAll(".node")
                            .data(graph.nodes)
                            .enter()
                            .append("rect")
                            .attr("x", function(d, i) {return i*(w /75);})
                            .attr("y", function(d) {return h - 40*Math.sqrt(d.occurrences);})
                            .attr("width", w/75 - 1)
                            .attr("height", function(d) {return 40*Math.sqrt(d.occurrences);})
                            .style("fill", "steelblue");         //function(d) { return color(1); }
                
                bar.append("title")
                    .text(function(d) { return d.word; });
                
                svg.selectAll("text")
                    .data(graph.nodes)
                    .enter()
                    .append("text")
                    .text(function(d) {return d.word;})
                    .attr("y", function(d, i) {return i * (w / 75);})
                    .attr("x", function(d) {return h - 40*Math.sqrt(d.occurrences);})
                    .attr("dx", "-100em")
                    .attr("dy", ".15em")
                    .attr("transform", "rotate(-90)")
                    .attr("font-family", "sans-serif")
                    .attr("font-size", "9px")
                    .attr("fill", "white");
                
                /*var titles = gnodes.append("title")
                            .text(function(d) { return d.word; });*/
                
                force.on("tick", function() {
                    
                });
                
                /*node.on("click", function(){
                   window.location='#'; 
                });*/
            });
        </script>
    <!--<script src="cluster.js"></script>    -->
</body>
</html>