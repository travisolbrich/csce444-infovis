<!DOCTYPE html>
<html>
<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="http://meyerweb.com/eric/tools/css/reset/reset.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="style.css">
</head>

<body>
<div class="pure-g">
    <div id="grapharea" class="pure-u-3-4">
        <div id="graph"></div>
    </div>
    <div class="pure-u-1-4">
        <div class="sidebar">
            <h1 id="pageTitle">Most Popular Words</h1>

            <div id="nodeDetails">

            </div>

            <hr>
            <a href="index.html" class="round-button">About</a><br><br>
            <p>We had to choose different data to show which has set us back. Features still to come...</p>
            <ul>
                <li>Node changes color when selected, neighbor nodes change color</li>
                <li>Option to view details for single node only</li>
                <li>View users of a node and the groups they're in</li>
                <li>Filter based on minimum number of shared users, group privacy, number of users in group</li>
            </ul>
        </div>
    </div>

</div>
    <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <script>
            var w = document.getElementById('grapharea').offsetWidth - 30;
            var h = 869;

            var force = d3.layout.force()
                            .charge(-275)
                            //.chargeDistance(100)
                            .linkDistance(30)
                            //.friction(0)
                            //.theta(1)
                            .gravity(.1)
                            .size([w, h]);
            var svg = d3.select("#graph")
                            .append("svg")
                            .attr("width", w)
                            .attr("height", h)
                            .style("background", "aqua");
            
            d3.json("http://travisolbrich.com:8080/words/frequency", function(error, graph){
                if(error) throw error;
                
                                force.nodes(graph.nodes)
                     .start();
                
                /*var gnodes = svg.selectAll('g.gnode')
                                .data(graph.nodes)
                                .enter()
                                .append('g')
                                .classed('gnode', true);*/
                
                var node = svg.selectAll(".node")
                            .data(graph.nodes)
                            .enter().append("circle")
                            .attr("class", "node")
                            .attr("cx", function() { return Math.random() * 450; })
                            .attr("cy", function() { return Math.random() * 450; })
                            .attr("r", function(d) { return Math.sqrt(d.occurrences)/1.8+30})
                            .style("fill", "steelblue")          //function(d) { return color(1); }
                            .style("stroke", "darkgrey")
                            .style("stroke-width", "2px")
                            .style("fontcolor", "white")
                            .call(force.drag);
                
                node.append("title")
                    .text(function(d) { return d.word; });
                
                /*var titles = gnodes.append("title")
                            .text(function(d) { return d.word; });*/
                
                //console.log(titles);
                
                force.on("tick", function() {
                    node.attr("cx", function(d) { return d.x; })
                        .attr("cy", function(d) { return d.y; });
                });
                
                /*node.on("click", function(){
                   window.location='#'; 
                });*/
                
                //node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
                /*gnodes.attr("transform", function(d) { 
                    return 'translate(' + [d.x, d.y] + ')'; 
                });*/
            });
        </script>
    <!--<script src="cluster.js"></script>    -->
</body>
</html>